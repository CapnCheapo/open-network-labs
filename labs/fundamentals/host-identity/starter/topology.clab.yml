name: host-identity

topology:
  nodes:
    sw1:
      kind: arista_ceos
      image: ceos:4.34.4M
      startup-config: configs/sw1.cfg
      group: switch
    pc1:
      kind: linux
      image: ghcr.io/capncheapo/labhost-lite:1.0.1
      group: server
      exec: 
        - sudo ip route del default via 172.20.20.1 dev eth0
    pc2:
      kind: linux
      image: ghcr.io/capncheapo/labhost-lite:1.0.1
      group: server
      exec: 
        - sudo ip addr replace 192.168.50.50/24 dev eth1
        - sudo ip route del default via 172.20.20.1 dev eth0
    pc3:
      kind: linux
      image: ghcr.io/capncheapo/labhost-lite:1.0.1
      group: server
      exec: 
        - sudo ip addr replace 192.168.123.100/24 dev eth1
        - sudo ip route del default via 172.20.20.1 dev eth0
  links:
    - endpoints: ["sw1:eth1", "pc1:eth1"]
    - endpoints: ["sw1:eth2", "pc2:eth1"]
    - endpoints: ["sw1:eth3", "pc3:eth1"]

